import{h as x,_ as F}from"./index.57d77736.js";import{a as N,r as l,K as Y,M as z,I as L,m as e,n as a,N as j,w as s,B as H,c as I,e as u,X as K,f as y,J as b,U as T,W as U,_ as q,T as J}from"./vendor.84d47383.js";import"./index.16dcec72.js";async function Q(i){return await x.get("/rest/message",{params:i||{}})}async function R(i){return await x.delete("/rest/message/"+i)}const S={class:"message"},W={class:"query"},X=b("\u641C\u7D22"),G=N({setup(i){let _=l([]),d=l(!1),r=l(1),m=l(8),g=l(50),c=l("");const p=async()=>{d.value=!0;const t=await Q({email:c.value,page:r.value,count:m.value});_.value=t.data.list,g.value=t.data.total,d.value=!1};p();const w=t=>{r.value=t,p()},B=Y("clientLevel",l(1)),C=async t=>{await R(t),J.success("\u5220\u9664\u6210\u529F"),p()},f=()=>{r.value=1,p()},D=t=>{t.key==="Enter"&&f()};return(t,v)=>{const k=u("el-input"),h=u("el-button"),n=u("el-table-column"),M=u("el-icon"),A=u("el-table"),E=u("el-pagination"),V=K("loading");return y(),z("div",S,[L("div",W,[e(k,{modelValue:a(c),"onUpdate:modelValue":v[0]||(v[0]=o=>j(c)?c.value=o:c=o),onKeydown:D,placeholder:"\u6309\u90AE\u7BB1\u641C\u7D22",clearable:"",style:{"max-width":"300px"}},null,8,["modelValue"]),e(h,{type:"primary",onClick:f},{default:s(()=>[X]),_:1})]),H((y(),I(A,{data:a(_)},{default:s(()=>[e(n,{type:"index",fixed:""}),e(n,{label:"\u540D\u79F0",prop:"name"}),e(n,{label:"\u90AE\u7BB1",prop:"email","min-width":"180px"}),e(n,{label:"\u5185\u5BB9",prop:"content","min-width":"180px"}),e(n,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createdAt","min-width":"180px"},{default:s(({row:o})=>[b(T(a(U)(o.createdAt).format("YYYY-MM-DD HH:mm:ss")),1)]),_:1}),e(n,{align:"center","min-width":"200px",fixed:a(B)===3?!1:"right",label:"\u5220\u9664"},{default:s(({row:o})=>[e(h,{round:"",size:"large",onClick:O=>C(o._id)},{default:s(()=>[e(M,null,{default:s(()=>[e(a(q))]),_:1})]),_:2},1032,["onClick"])]),_:1},8,["fixed"])]),_:1},8,["data"])),[[V,a(d)]]),e(E,{background:"",layout:"total, prev, pager, next",total:a(g),"pager-count":5,"current-page":a(r),"page-size":a(m),onCurrentChange:w},null,8,["total","current-page","page-size"])])}}});var ee=F(G,[["__scopeId","data-v-fa2c344e"]]);export{ee as default};
