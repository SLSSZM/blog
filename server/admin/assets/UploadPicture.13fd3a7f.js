import{a as V,Z as b,l as B,P as U,r as E,e as u,f as i,M as p,m as o,w as s,c as I,n as d,$ as N,a0 as m,N as f,a1 as D,_ as M,v as P,I as S,T as z}from"./vendor.84d47383.js";import{_ as F}from"./index.57d77736.js";const R=["src"],A={key:2,class:"hover-icon"},T=["src"],Z=V({props:{image:{default:""},height:{default:"200px"},width:{default:"100%"},disabled:{type:Boolean,default:!1}},emits:["upload","update:image","delete"],setup(_,{emit:r}){const t=_;b(e=>({e95e67d6:t.width,"760c8690":t.height}));const g=B({authorization:"Bearer "+localStorage.token}),v="/api/admin/upload",h=(e,l)=>{r("upload",e.data.url),r("update:image",e.data.url),e.token&&localStorage.setItem("token",e.token)},k=U(),w=(e,l)=>{z.error("\u56FE\u7247\u4E0A\u4F20\u5931\u8D25"),e.status===401&&k.replace("/login")},C=()=>{r("upload",""),r("delete")};let a=E(!1);return(e,l)=>{const n=u("el-icon"),x=u("el-upload"),y=u("el-dialog");return i(),p("div",null,[o(x,{class:"avatar-uploader",action:v,headers:d(g),"show-file-list":!1,"on-success":h,"on-error":w,disabled:_.disabled},{default:s(()=>[t.image?(i(),p("img",{key:0,src:t.image,class:"avatar",cover:""},null,8,R)):(i(),I(n,{key:1,class:"avatar-uploader-icon"},{default:s(()=>[o(d(N))]),_:1})),t.image?(i(),p("div",A,[o(n,{class:"preview-icon",onClick:l[0]||(l[0]=m(c=>f(a)?a.value=!0:a=!0,["stop"]))},{default:s(()=>[o(d(D))]),_:1}),o(n,{class:"preview-icon",onClick:m(C,["stop"])},{default:s(()=>[o(d(M))]),_:1},8,["onClick"])])):P("",!0)]),_:1},8,["headers","disabled"]),o(y,{modelValue:d(a),"onUpdate:modelValue":l[1]||(l[1]=c=>f(a)?a.value=c:a=c)},{default:s(()=>[S("img",{style:{width:"100%"},src:t.image,cover:""},null,8,T)]),_:1},8,["modelValue"])])}}});var q=F(Z,[["__scopeId","data-v-c749b8b0"]]);export{q as U};
